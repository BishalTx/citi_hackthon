version: 1.0
runtime: nodejs12
build:
  commands:
    - mkdir -p /app/moodle
    - cp -r * /app/moodle/
    - cd /app/moodle
    - # Add any additional build steps here
run:
  command: |
    cd /app/moodle
    # Install any necessary dependencies and configure Moodle here
    # For example:
    # - composer install
    # - php /app/moodle/admin/cli/install.php --non-interactive --agree-license --dataroot=/app/moodledata --wwwroot=${APP_PORT}
    # - php /app/moodle/admin/tool/behat/cli/init.php
    # - php /app/moodle/admin/cli/purge_caches.php
    # - php /app/moodle/admin/cli/maintenance.php --enable
    # - php-fpm -D
    # - nginx -g "daemon off;"

services:
  - name: moodle
    port: 8080
    healthcheck:
      path: /
    environments:
      - name: APP_PORT
        value: "8080"
